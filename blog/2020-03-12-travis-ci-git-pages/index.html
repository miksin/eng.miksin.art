<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.26.0"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><title data-react-helmet="true">使用Travis CI自動部署靜態網頁到GitHub Pages | Miksin, Software Engineer</title><meta data-react-helmet="true" name="description" content="Software Engineer"/><meta data-react-helmet="true" property="og:title" content="使用Travis CI自動部署靜態網頁到GitHub Pages"/><meta data-react-helmet="true" property="og:description" content="Software Engineer"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Miksin"/><meta data-react-helmet="true" name="twitter:title" content="使用Travis CI自動部署靜態網頁到GitHub Pages"/><meta data-react-helmet="true" name="twitter:description" content="Software Engineer"/><style data-styled="" data-styled-version="5.0.0">.fBcHph{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
.bqpllT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
.hOBGtl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}
.iFnZeD{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;}
data-styled.g1[id="FlexBox__Wrapper-sc-45dptv-0"]{content:"fBcHph,bqpllT,hOBGtl,iFnZeD,"}
.ibEjsK{width:100vw;height:100vh;left:0;right:0;top:0;bottom:0;position:fixed;z-index:25;background:linear-gradient(to left,#03a9f4,#03a9f4);-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%);-webkit-transition:-webkit-transform 0.25s ease;-webkit-transition:transform 0.25s ease;transition:transform 0.25s ease;}
.ibEjsK.active{-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0);}
data-styled.g3[id="ScreenWrapper__Wrapper-vsi53p-0"]{content:"ibEjsK,"}
.cxaaeV{outline:none;border:none;background:transparent;padding:0;margin:0;cursor:pointer;font-size:1rem;padding:5.6000000000000005px;background:transparent;border-radius:50%;}
data-styled.g5[id="IconButton__Btn-sc-1hru6ba-0"]{content:"cxaaeV,"}
.imFazf{max-width:480px;width:100%;height:100%;margin:auto;}
data-styled.g6[id="NavMenu__Wrapper-sc-112ma3h-0"]{content:"imFazf,"}
.fwudgg{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;width:100%;}
data-styled.g7[id="NavMenu__RestPadding-sc-112ma3h-1"]{content:"fwudgg,"}
.hCYRiP{margin:auto;padding-top:54px;width:100%;position:relative;}
.hCYRiP.active > div{-webkit-animation-name:dZWjwz;animation-name:dZWjwz;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:steps(20,end);animation-timing-function:steps(20,end);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;}
.hCYRiP.active > div:nth-child(1){-webkit-animation-delay:0s;animation-delay:0s;}
.hCYRiP.active > div:nth-child(2){-webkit-animation-delay:0.25s;animation-delay:0.25s;}
.hCYRiP.active > div:nth-child(3){-webkit-animation-delay:0.5s;animation-delay:0.5s;}
data-styled.g8[id="NavMenu__MenuList-sc-112ma3h-2"]{content:"hCYRiP,"}
.fYmhvR{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:0%;overflow:hidden;}
.fYmhvR:hover{background:linear-gradient(to left,transparent,rgba(255,255,255,.2),transparent);}
data-styled.g9[id="NavMenu__MenuItem-sc-112ma3h-3"]{content:"fYmhvR,"}
.LoyzR{padding:8px 0;margin:auto;text-align:center;font-size:27px;-webkit-text-decoration:none;text-decoration:none;color:#FFFFFF;white-space:nowrap;}
data-styled.g10[id="NavMenu__MenuLink-sc-112ma3h-4"]{content:"LoyzR,"}
.jxAmWg.active{-webkit-animation-name:hrftdn;animation-name:hrftdn;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-timing-function:cubic-bezier(0,.68,1,.59);animation-timing-function:cubic-bezier(0,.68,1,.59);-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;}
data-styled.g11[id="NavMenu__CloseButton-sc-112ma3h-5"]{content:"jxAmWg,"}
.getVgF{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}
data-styled.g12[id="FlexPad-sc-1ym60i8-0"]{content:"getVgF,"}
.cMwFXn{position:fixed;width:100%;height:72px;background-color:rgba(255,255,255,0.7);z-index:20;}
@media screen and (max-width:480px){.cMwFXn{height:54px;}}
data-styled.g13[id="Nav__Fixed-sc-1o6jxpf-0"]{content:"cMwFXn,"}
.ddbBGg{margin:auto;width:100%;height:100%;max-width:1024px;}
data-styled.g14[id="Nav__Wrapper-sc-1o6jxpf-1"]{content:"ddbBGg,"}
.fhhaSx{margin:auto 8px;width:54px;height:54px;}
@media screen and (max-width:480px){.fhhaSx{width:42px;height:42px;}}
data-styled.g15[id="Nav__MenuButton-sc-1o6jxpf-2"]{content:"fhhaSx,"}
.cqqoUB{width:100%;height:72px;}
@media screen and (max-width:480px){.cqqoUB{height:54px;}}
data-styled.g16[id="TopPad-sc-1g3sqa8-0"]{content:"cqqoUB,"}
.iEQKhJ{background-color:#03a9f4;color:#FFFFFF;padding:4px 10px;border-radius:13px;text-align:center;box-shadow:1px 1px 5px 0px rgba(0,0,0,.3);}
.iEQKhJ > .name{font-size:18px;line-height:20px;white-space:nowrap;}
.iEQKhJ > .number{background-color:rgba(66,66,66,0.5);border-radius:10px;font-size:14px;min-width:20px;height:20px;line-height:20px;text-align:center;}
data-styled.g42[id="Tag__Base-sc-1ptnjp8-0"]{content:"iEQKhJ,"}
.ivgbap{width:100%;max-width:768px;margin:0 auto;padding:12px;}
data-styled.g80[id="blogTemplate__Wrapper-sc-15p5gtv-1"]{content:"ivgbap,"}
.fMosDr{width:100%;padding:12px;}
data-styled.g81[id="blogTemplate__Frontmatter-sc-15p5gtv-2"]{content:"fMosDr,"}
.hfAlaT{width:100%;padding:12px;}
.hfAlaT a{font-weight:700 !important;color:inherit !important;}
data-styled.g84[id="blogTemplate__Content-sc-15p5gtv-5"]{content:"hfAlaT,"}
.kUWNvc{width:100%;margin:12px auto;border-top:1px solid #424242;}
data-styled.g85[id="blogTemplate__Comment-sc-15p5gtv-6"]{content:"kUWNvc,"}
@-webkit-keyframes dZWjwz{from{width:0%;}to{width:100%;}}
@keyframes dZWjwz{from{width:0%;}to{width:100%;}}
data-styled.g87[id="sc-keyframes-dZWjwz"]{content:"dZWjwz,"}
@-webkit-keyframes hrftdn{0%{-webkit-transform:rotate(0deg) scale(1) translateY(0);-ms-transform:rotate(0deg) scale(1) translateY(0);transform:rotate(0deg) scale(1) translateY(0);}50%{-webkit-transform:rotate(180deg) scale(0.9) translateY(10%);-ms-transform:rotate(180deg) scale(0.9) translateY(10%);transform:rotate(180deg) scale(0.9) translateY(10%);}100%{-webkit-transform:rotate(360deg) scale(1) translateY(0);-ms-transform:rotate(360deg) scale(1) translateY(0);transform:rotate(360deg) scale(1) translateY(0);}}
@keyframes hrftdn{0%{-webkit-transform:rotate(0deg) scale(1) translateY(0);-ms-transform:rotate(0deg) scale(1) translateY(0);transform:rotate(0deg) scale(1) translateY(0);}50%{-webkit-transform:rotate(180deg) scale(0.9) translateY(10%);-ms-transform:rotate(180deg) scale(0.9) translateY(10%);transform:rotate(180deg) scale(0.9) translateY(10%);}100%{-webkit-transform:rotate(360deg) scale(1) translateY(0);-ms-transform:rotate(360deg) scale(1) translateY(0);transform:rotate(360deg) scale(1) translateY(0);}}
data-styled.g88[id="sc-keyframes-hrftdn"]{content:"hrftdn,"}
</style><link rel="icon" href="/icons/icon-48x48.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#A5CD6C"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=e342f90d083b1b3731d53522093d79b6"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=e342f90d083b1b3731d53522093d79b6"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-95d7254f0b8195877f27.js"/><link as="script" rel="preload" href="/framework-3df18ebf83881fc06365.js"/><link as="script" rel="preload" href="/app-da986bb1d07e1600a16a.js"/><link as="script" rel="preload" href="/commons-71ccdb6ed01a5276abac.js"/><link as="script" rel="preload" href="/component---src-templates-blog-template-js-bfeebca80eae9377f994.js"/><link as="fetch" rel="preload" href="/page-data/blog/2020-03-12-travis-ci-git-pages/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/><link href="https://fonts.googleapis.com/css?family=Noto+Sans+TC:400,700&amp;display=swap" rel="stylesheet"/><link href="/loader.css" rel="stylesheet"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___loader"><div class="typewriter"><h1 class="text"></h1><h1 class="cursor"></h1></div></div><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div color="rgba(255, 255, 255, 0.7)" class="FlexBox__Wrapper-sc-45dptv-0 fBcHph Nav__Fixed-sc-1o6jxpf-0 cMwFXn" wrap="nowrap" dir="row "><div class="FlexBox__Wrapper-sc-45dptv-0 fBcHph Nav__Wrapper-sc-1o6jxpf-1 ddbBGg" wrap="nowrap" dir="row "><div class="FlexPad-sc-1ym60i8-0 getVgF"></div><button class="BaseButton-sc-63z50-0 IconButton__Btn-sc-1hru6ba-0 cxaaeV Nav__MenuButton-sc-1o6jxpf-2 fhhaSx"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="#03a9f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></div><div class="ScreenWrapper__Wrapper-vsi53p-0 ibEjsK"><div class="FlexBox__Wrapper-sc-45dptv-0 bqpllT NavMenu__Wrapper-sc-112ma3h-0 imFazf" wrap="nowrap" dir="column "><div class="FlexBox__Wrapper-sc-45dptv-0 bqpllT NavMenu__MenuList-sc-112ma3h-2 hCYRiP" wrap="nowrap" dir="column "><div class="FlexBox__Wrapper-sc-45dptv-0 hOBGtl NavMenu__MenuItem-sc-112ma3h-3 fYmhvR" wrap="nowrap" dir="row "><a class="NavMenu__MenuLink-sc-112ma3h-4 LoyzR" href="/">Home</a></div><div class="FlexBox__Wrapper-sc-45dptv-0 hOBGtl NavMenu__MenuItem-sc-112ma3h-3 fYmhvR" wrap="nowrap" dir="row "><a class="NavMenu__MenuLink-sc-112ma3h-4 LoyzR" href="/about">About</a></div><div class="FlexBox__Wrapper-sc-45dptv-0 hOBGtl NavMenu__MenuItem-sc-112ma3h-3 fYmhvR" wrap="nowrap" dir="row "><a class="NavMenu__MenuLink-sc-112ma3h-4 LoyzR" href="/blog">Blog</a></div></div><div class="FlexBox__Wrapper-sc-45dptv-0 fBcHph NavMenu__RestPadding-sc-112ma3h-1 fwudgg" wrap="nowrap" dir="row "><button class="BaseButton-sc-63z50-0 IconButton__Btn-sc-1hru6ba-0 cxaaeV NavMenu__CloseButton-sc-112ma3h-5 jxAmWg"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 24 24" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></button></div></div></div><div class="FlexBox__Wrapper-sc-45dptv-0 bqpllT blogTemplate__Base-sc-15p5gtv-0 AQA-Du" wrap="nowrap" dir="column "><div class="TopPad-sc-1g3sqa8-0 cqqoUB"></div><div class="FlexBox__Wrapper-sc-45dptv-0 bqpllT blogTemplate__Wrapper-sc-15p5gtv-1 ivgbap" wrap="nowrap" dir="column "><div class="FlexBox__Wrapper-sc-45dptv-0 iFnZeD blogTemplate__Frontmatter-sc-15p5gtv-2 fMosDr" wrap="nowrap" dir="column "><h1 class="blogTemplate__Title-sc-15p5gtv-3 fXYTXE">使用Travis CI自動部署靜態網頁到GitHub Pages</h1><h4 class="blogTemplate__Timestamp-sc-15p5gtv-4 ixGIPH">March 12, 2020</h4><div class="FlexBox__Wrapper-sc-45dptv-0 hOBGtl blogTemplate__TagList-sc-15p5gtv-7 cZNPGS" wrap="nowrap" dir="row "><div class="FlexBox__Wrapper-sc-45dptv-0 fBcHph Tag__Base-sc-1ptnjp8-0 iEQKhJ mg-lr-2" color="#FFFFFF" wrap="nowrap" dir="row "><span class="name">git</span></div><div class="FlexBox__Wrapper-sc-45dptv-0 fBcHph Tag__Base-sc-1ptnjp8-0 iEQKhJ mg-lr-2" color="#FFFFFF" wrap="nowrap" dir="row "><span class="name">ci</span></div><div class="FlexBox__Wrapper-sc-45dptv-0 fBcHph Tag__Base-sc-1ptnjp8-0 iEQKhJ mg-lr-2" color="#FFFFFF" wrap="nowrap" dir="row "><span class="name">travis-ci</span></div><div class="FlexBox__Wrapper-sc-45dptv-0 fBcHph Tag__Base-sc-1ptnjp8-0 iEQKhJ mg-lr-2" color="#FFFFFF" wrap="nowrap" dir="row "><span class="name">github</span></div></div></div><div class="blogTemplate__Content-sc-15p5gtv-5 hfAlaT"><h2>前言</h2>
<p>GitHub Pages 是個好用且免費的靜態網站空間，只要把你的靜態網站檔案 push 到 gh-pages 這條 branch 就會自動產生靜態網頁。
不過現在幾個流行的前端框架並不是直接就是靜態網頁需要的形式，還需要透過 build 來產生。
因此如果每次 push 上主要開發用的 branch 後，自動在 gh-pages 裡產生靜態網頁檔案就會方便許多了。</p>
<h2>開始使用 Travis CI</h2>
<p>Travis CI 使一個可以與 Github 的 public repository 連動，並自動部署的基本免費服務。
使用這個服務只要做一些簡單的設定即可達成我們要的功能。</p>
<p>首先到<a href="https://travis-ci.com/">Travis CI</a>的官方網站直接點選「Sign up with GitHub」註冊一個帳號。</p>
<p>點選右上方頭像點選「settings」進入設定畫面。然後 Sync Account 並 Activate。</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/c42d674d1a1c2d525cdb079ec05fc476/2e661/travis-ci-setting-1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54.572271386430685%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABf0lEQVQoz31Sy07DMBDM9/MRXBEfgPgDbhyoQCq9VaI0jtu8ajsPJxlm3bqUULA08vqxs7uzm1jn0LYtpmnCBHyDZz8MaJoG1hh474HTveDSvkSS1TX2xqKhg20buLqEczaQjiQs8hxlWZ4J44qk85Xcvi1x8/yCp/UasAf4xmEcx+DgSNL5AQOJB9p916Hv+3D+M8NlqrDYfEJVFSYSjeHj8XPRtKgpR0M4wrL8lqRCLu8SeI7EsmRLMs+PHXFZimk7pNRPWwdNrbcHA9f7EHGYEZ0zzIsCe+pUcDd0lgZFvay1yMscFQNWVYky7DVqJnG8q4K+0Ra/RLroGF12IRNEjTrLUnODnd4jzTJkaQpFZLSVUgFiSyIC0Te51qlY9qte4X71CFUrMComU1Pn4df4/OjytU6N0xgeF9kSd+8P2O44AV2PniVJ9v60R1sg+ss5uZZdjOwqlqIr6GyHj80GWusfpaYiwck+a/gfoeWAF2yGMYeg8XxEJKNoR98vsFxYJ+8bDfIAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="travis-ci-setting-1.png"
        title="travis-ci-setting-1.png"
        src="/static/c42d674d1a1c2d525cdb079ec05fc476/6ff5e/travis-ci-setting-1.png"
        srcset="/static/c42d674d1a1c2d525cdb079ec05fc476/135ae/travis-ci-setting-1.png 300w,
/static/c42d674d1a1c2d525cdb079ec05fc476/34e8a/travis-ci-setting-1.png 600w,
/static/c42d674d1a1c2d525cdb079ec05fc476/6ff5e/travis-ci-setting-1.png 1200w,
/static/c42d674d1a1c2d525cdb079ec05fc476/79a4a/travis-ci-setting-1.png 1800w,
/static/c42d674d1a1c2d525cdb079ec05fc476/2e661/travis-ci-setting-1.png 2034w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        loading="lazy"
      />
  </a>
    </span></p>
<p>成功後就可以看見自己現在 GitHub 帳號中有的 repositories 了。</p>
<h2>取得 GitHub Access Token</h2>
<p>在開始設定自動部署前，還需要先在 GitHub 拿到存取用的 access token 才行。
我們直接到<a href="https://github.com/settings/tokens">Personal access tokens</a>的頁面並點選「Generate new token」。</p>
<p>參考 Travis CI 的<a href="https://docs.travis-ci.com/user/deployment/pages/">教學</a>，我們至少需要「public_repo」這項權限，勾選他吧！
詳細權限設定的部分可以參考<a href="https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/">這裡</a>。</p>
<p>然後按下「Generate token」即可產生，這個 token 只會顯示這一次而已，要自己記好。</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/229cf51739b16e1f47deb4321c61e171/8e846/github-access-token-1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 54%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACTUlEQVQoz42S3UsUURiH90JFdNU7FdrANnGVVlMDu6+8MIKgGyECo24Dw6j7gihIoQ8woSgiuumvcN0tKg3CiyzTpDZ39suZ2Zl1dmb24+mcs+pldODh/f3eOe875yuQ0tKkMxm0dAapdcPgX6NarYn5ObZTaVKiRjcLFLN57EyecrlMwLIK2JaFVShQEBRtG9/z8Dz3ANfzcbwq5UoVajVc16VUKil836cifFlQq1UJaDkTLWewndVJZQ2lU3tekdlBMxySRgXdqeJWUIj+Kjp+DaeMoiJWH1jbgZ82fNdhLV/na67uf5gCcQJfkiVWtmw+bdp82LD4KOL7dZPVPx7rYu43OV/UFV2xwruzj7hzf46H8894+eYtCy9eM//8FXNPFrh9b5YHj5+yoWXRxZZyu7vkHUch9Y7YsiGORLeKCr9SIXD+wjkmzo5z5eoUN2/NMH39GjM3ppm6fImJiXEmL07yeW2VvJ1C03+TNpIHSK+JuP1rEy25hV8VlxIdHGTs5BgjIyNEo1Gig1GOiTh0fIjRE6MMDw8T6eujv7+fPhEVkQiRPQYGBgj39nLqzGkscbkBMdins7NTFYbDYUKhkIo9PUeEPkx3dzeHDoWE71FN5AJaW4MHtV1dXZimWW/Y1NRIQ0MDLS0ttLe309HRQTAYpK2tTXmpm5ubVZR+Py9zjY2NquFR8XP57AKxpSUSiQTxeIIloaVfjMXqOiaROi6+x1VOfpP5xb18IvFOxeXllfrDLpVcHNfDKIEpKLhguXUt0R0QT+2/x1/BPJb5pb/y8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="github-access-token-1.png"
        title="github-access-token-1.png"
        src="/static/229cf51739b16e1f47deb4321c61e171/6ff5e/github-access-token-1.png"
        srcset="/static/229cf51739b16e1f47deb4321c61e171/135ae/github-access-token-1.png 300w,
/static/229cf51739b16e1f47deb4321c61e171/34e8a/github-access-token-1.png 600w,
/static/229cf51739b16e1f47deb4321c61e171/6ff5e/github-access-token-1.png 1200w,
/static/229cf51739b16e1f47deb4321c61e171/8e846/github-access-token-1.png 1500w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        loading="lazy"
      />
  </a>
    </span></p>
<h2>設定.travis.yml</h2>
<p>然後我們需要在 repository 中放置一個名為<code class="language-text">.travis.yml</code>的檔案來定義我們希望 Travis CI 幫我們做的事以及環境等。</p>
<p>這裡我提供一個我的 Vue 專案的範例：</p>
<div class="gatsby-highlight" data-language="yml"><pre class="language-yml"><code class="language-yml"><span class="token key atrule">language</span><span class="token punctuation">:</span> node_js <span class="token comment"># 指定語言為node.js 10</span>
<span class="token key atrule">node_js</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"10"</span>

<span class="token key atrule">cache</span><span class="token punctuation">:</span>
  <span class="token key atrule">yarn</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">directories</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">"node_modules"</span>

<span class="token key atrule">branches</span><span class="token punctuation">:</span>
  <span class="token key atrule">only</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> master <span class="token comment"># 指定當master branch發生變動時才觸發</span>

<span class="token comment"># 定義觸發後的行為，還有其他像是before_install等callback</span>
<span class="token key atrule">install</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> yarn install
  <span class="token punctuation">-</span> yarn run build

<span class="token key atrule">script</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> echo "Skipping tests"

<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">provider</span><span class="token punctuation">:</span> pages
  <span class="token key atrule">skip-cleanup</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">github-token</span><span class="token punctuation">:</span> $GITHUB_ACCESS_TOKEN <span class="token comment"># 這裏到時候會在環境設定我們在GitHub拿到的Access Token</span>
  <span class="token key atrule">target-branch</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages <span class="token comment"># 把build出來的檔案push進GitHub Pages用的branch</span>
  <span class="token key atrule">local-dir</span><span class="token punctuation">:</span> dist <span class="token comment"># Vue專案預設build到的資料夾，當然這是可以更動的</span>
  <span class="token key atrule">on</span><span class="token punctuation">:</span>
    <span class="token key atrule">branch</span><span class="token punctuation">:</span> master</code></pre></div>
<p>更多設定可以參考官方的<a href="https://docs.travis-ci.com/user/customizing-the-build">Customizing the Build</a>。</p>
<h2>設定環境變數與啟動自動部署</h2>
<p>回到 Travis CI 的 <a href="https://travis-ci.org/account/repositories">repo 一覽</a>，
把想要自動部署的 repo 的開關打開，並進入 Settings 來設定環境變數。</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/b5cba680514674759c12ee1c225a51e1/23749/travis-ci-setting-2.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 91.30434782608695%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7ElEQVQ4y6WUyYoaURSGrxPuRHduBBXcCILDG4iguG/yED5poDcZwNjBRdMdyqSJ1mzNf85/k2oMJDbVfeGvc8evzjl3UEmaIopjuK4Lx3G0oigCS5ZlKFpUkiQ4BwEOh4OWYRgIpP1qYF7xfR+E5yWH0RaRigTiSYixNBjq+XwuDPkL6EQxHl0PlsCiMITneXhLUQScTiecTFPLtCyYYo/Sdzwedd22bVjSz3lWPi5jeZuWfcy9ymSXIcrSBJmEnzKPf/pYj+UEMLfJRZ32UqFERnFM2RLqg+Piu2yK4fn4IfZR2veWDTMIi4ccyh8sCdsVkCPyBeKHETz+9cK7f0qioE0ZDesilXCRKJWQaQsVzwHMn+Bhy54MpLJeMZGbzQbz+Rzr9Rqr1QrL5fK/4vhiscC7mxu8//gBu4Oh2a7xDYFEqHd5MBhAKVVIlXIJt58+40nSQ890ugjkZzab6Um1Wg2VSuWqqtWqnttqtfD17g6ZwPgW+OKYPjYEjsdjPalcLr/oWalU0rbRaODLbvd8dPi48JZp4GQyeRVwJ8D8XHqXHk6n0995kZC44JrynzabTQ3MPeRtIlQDh8Nh4U2p1+vYbrfPQHK0h6TyuLTbbfT7fXS73avq9XrodDoYjUbY7/f6yhHIh5nQX9KzUQcGBtZkAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="travis-ci-setting-2.png"
        title="travis-ci-setting-2.png"
        src="/static/b5cba680514674759c12ee1c225a51e1/6ff5e/travis-ci-setting-2.png"
        srcset="/static/b5cba680514674759c12ee1c225a51e1/135ae/travis-ci-setting-2.png 300w,
/static/b5cba680514674759c12ee1c225a51e1/34e8a/travis-ci-setting-2.png 600w,
/static/b5cba680514674759c12ee1c225a51e1/6ff5e/travis-ci-setting-2.png 1200w,
/static/b5cba680514674759c12ee1c225a51e1/23749/travis-ci-setting-2.png 1334w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        loading="lazy"
      />
  </a>
    </span></p>
<p>在設定頁面我們需要把剛才在 GitHub 拿到的 Access Token 設定在環境變數中，變數名要與 travis.yml 中設定的相同。
這是為了避免 token 直接寫在檔案裡會被公開的疑慮，所以這裏設定環境變數時也記得不要將它顯示出來。</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1200px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3b06ba9f502d207bd5ff01f46b174d99/e877c/travis-ci-setting-3.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 32.104454685099846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABGUlEQVQY042QTUoEMRCFczFXrhTBC4h4Aw8guJABl8KAC0VUvIArEWVmL57AnSJMYv+MJt2dv850P1MZG0RmYeCjXhVJVeUxaQ3mWkMaA9f6SAsfljjvU816hxAC/nNYXVWQn1+gqJsGuqpRiA+8v76Bcw4hBPiMY16WkFJCKQUTh69Cx8VYvn+B2fohxOYI2fYxit0xsr0xxM4J+MYR+NYIfO0A+c0EualQZjnquk40cYFBEzSM1bdPkKf3kGcPCXU5gbqeorqaLvPzR8jxHarnFyhnoOKWw0bUkKK1NkGaLeK/wy/aH8KKGKK/9NBHb8lT0n+9ZU4bdG1I9GGB4Dy8sUkPNcot3et79JGu61IjgppTTv4WRYFvukrA5gWjp9YAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="travis-ci-setting-3.png"
        title="travis-ci-setting-3.png"
        src="/static/3b06ba9f502d207bd5ff01f46b174d99/6ff5e/travis-ci-setting-3.png"
        srcset="/static/3b06ba9f502d207bd5ff01f46b174d99/135ae/travis-ci-setting-3.png 300w,
/static/3b06ba9f502d207bd5ff01f46b174d99/34e8a/travis-ci-setting-3.png 600w,
/static/3b06ba9f502d207bd5ff01f46b174d99/6ff5e/travis-ci-setting-3.png 1200w,
/static/3b06ba9f502d207bd5ff01f46b174d99/79a4a/travis-ci-setting-3.png 1800w,
/static/3b06ba9f502d207bd5ff01f46b174d99/2fb56/travis-ci-setting-3.png 2400w,
/static/3b06ba9f502d207bd5ff01f46b174d99/e877c/travis-ci-setting-3.png 2604w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        loading="lazy"
      />
  </a>
    </span></p>
<p>然後嘗試 push 新的 commit 到 master branch 或是手動點選「Trigger build」看看是不是如預期的動作囉！</p>
<h2>References</h2>
<ul>
<li><a href="https://travis-ci.com/">Travis CI</a></li>
<li><a href="https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line">Creating a personal access token for the command line</a></li>
<li><a href="https://docs.travis-ci.com/user/deployment/pages/">GitHub Pages Deployment</a></li>
<li><a href="https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/">Understanding scopes for OAuth Apps</a></li>
<li><a href="https://docs.travis-ci.com/user/customizing-the-build">Customizing the Build</a></li>
</ul></div><div class="blogTemplate__Comment-sc-15p5gtv-6 kUWNvc"><span class="disqus-comment-count" data-disqus-identifier="/blog/2020-03-12-travis-ci-git-pages">...</span><div id="disqus_thread"></div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-XXXXXXXXX-X', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2020-03-12-travis-ci-git-pages";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-30a761bdd526fe06de9d.js"],"app":["/app-da986bb1d07e1600a16a.js"],"component---src-pages-about-js":["/component---src-pages-about-js-d91e3e78de353bd39f89.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-ccb2ecfe297d5dadba6b.js"],"component---src-pages-gallery-js":["/component---src-pages-gallery-js-801d5d7e00c0b0fb7a1d.js"],"component---src-pages-index-js":["/component---src-pages-index-js-de846764c8a94a35b937.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-bfeebca80eae9377f994.js"]};/*]]>*/</script><script src="/polyfill-30a761bdd526fe06de9d.js" nomodule=""></script><script src="/component---src-templates-blog-template-js-bfeebca80eae9377f994.js" async=""></script><script src="/commons-71ccdb6ed01a5276abac.js" async=""></script><script src="/app-da986bb1d07e1600a16a.js" async=""></script><script src="/framework-3df18ebf83881fc06365.js" async=""></script><script src="/webpack-runtime-95d7254f0b8195877f27.js" async=""></script></body></html>