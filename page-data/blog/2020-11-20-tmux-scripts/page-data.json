{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/2020-11-20-tmux-scripts","result":{"data":{"site":{"siteMetadata":{"title":"Miksin, Software Engineer","subtitles":["Hello! I am Miksin","I'm a Software Engineer","I'm Painting","I'm Programming","I come from TAIWAN"],"description":"Software Engineer","author":"Miksin","links":[{"name":"Home","path":"/"},{"name":"About","path":"/about"},{"name":"Blog","path":"/blog"}],"socialLinks":[{"name":"github","link":"https://github.com/miksin"},{"name":"twitter","link":"https://twitter.com/miksin_"},{"name":"instagram","link":"https://www.instagram.com/miksin_/"},{"name":"pixiv","link":"https://pixiv.me/miksin"},{"name":"youtube","link":"https://www.youtube.com/channel/UCmYleBoaTtNtPVZkaUwFxOw"}]}},"page":{"html":"<h2>前言</h2>\n<p>我們可能每次開機都想執行一些固定的幾個指令於command line。\n可能同時想執行測試server、log監控或ssh連上特定伺服器等。</p>\n<p>這時我們可以使用tmux來管理這些分頁會很方便，但tmux在重開機之後就要把分頁開回來挺麻煩的，有沒有什麼方便點的方法呢。</p>\n<h2>設定shell script</h2>\n<h3>Prerequisite</h3>\n<p>當然，要先安裝tmux。mac的話可以使用homebrew：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> tmux</code></pre></div>\n<p>安裝好tmux後，設定shell script如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/bin/sh</span>\n\n<span class=\"token comment\"># 自己隨便設定一個session名稱</span>\n<span class=\"token assign-left variable\">SESSION_NAME</span><span class=\"token operator\">=</span><span class=\"token string\">\"my_tmux_session\"</span>\n\n<span class=\"token comment\"># 檢查這個session本來是否存在</span>\ntmux has-session -t <span class=\"token variable\">${SESSION_NAME}</span> <span class=\"token operator\"><span class=\"token file-descriptor important\">2</span>></span>/dev/null\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$?</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token comment\"># 先開啟新的session</span>\n    <span class=\"token comment\"># shell 0</span>\n    tmux new-session -s <span class=\"token variable\">${SESSION_NAME}</span> -n <span class=\"token function\">bash</span> -d\n    tmux send-keys -t <span class=\"token variable\">${SESSION_NAME}</span>:0 <span class=\"token string\">'cd /path/to/web &amp;&amp; npm run start'</span> C-m\n\n    <span class=\"token comment\"># 已經有session了所以使用new-window</span>\n    <span class=\"token comment\"># shell 1</span>\n    tmux new-window -n <span class=\"token function\">bash</span> -t <span class=\"token variable\">${SESSION_NAME}</span>\n    tmux send-keys -t <span class=\"token variable\">${SESSION_NAME}</span>:1 <span class=\"token string\">'cd /path/to/server &amp;&amp; ./server'</span> C-m\n\n    <span class=\"token comment\"># shell 2</span>\n    tmux new-window -n <span class=\"token function\">bash</span> -t <span class=\"token variable\">${SESSION_NAME}</span>\n    tmux send-keys -t <span class=\"token variable\">${SESSION_NAME}</span>:2 <span class=\"token string\">'htop'</span> C-m\n\n    <span class=\"token comment\"># 將畫面切回一開始的window</span>\n    tmux select-window -t <span class=\"token variable\">${SESSION_NAME}</span>:0\n<span class=\"token keyword\">fi</span>\n\ntmux attach-session -t <span class=\"token variable\">${SESSION_NAME}</span></code></pre></div>\n<p>很簡單吧！</p>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://gist.github.com/dmkash/2355219\">Shell Script for tmux setup - dmkash</a></li>\n<li><a href=\"https://tmuxcheatsheet.com/\">Tmux Cheat Sheet &#x26; Quick Reference</a></li>\n</ul>","frontmatter":{"date":"November 20, 2020","path":"/blog/2020-11-20-tmux-scripts","title":"用shell script啟動tmux","tags":["shell","tmux"]}}},"pageContext":{"next":null,"prev":{"frontmatter":{"path":"/blog/2020-11-05-brew-install-specific-version","title":"Homebrew安裝指定版本的套件"}}}},"staticQueryHashes":["63159454"]}